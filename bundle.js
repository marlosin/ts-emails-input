!function(){"use strict";function t(t,e,n){var i=document.createElement(t),r=function(t){return t.forEach((function(t){return i.classList.add(t)}))};return"string"==typeof e?i.innerHTML=e:r(e),n&&r(n),i}var e=function(t,e){return"string"==typeof t?document.querySelector(t):t.querySelector(e)};function n(){return new s}var i=["google","yahoo","hotmail"],r=function(){return Math.random().toString(36).substring(2,10)+"@"+i[Math.floor(Math.random()*i.length)]+".com"};function o(t){return/^([a-zA-Z0-9_\-\\.]+)@([a-zA-Z0-9_\-\\.]+)\.([a-zA-Z]{2,5})$/i.test(t)}var a,s=function(){function t(){this.listeners={}}return t.prototype.addEventListener=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.dispatchEvent=function(t){var e;null===(e=this.listeners[t.name])||void 0===e||e.forEach((function(e){return e(t.data)}))},t}(),l=function(t,e){this.name=t,this.data=e};!function(t){t.ADD="ADD",t.REMOVE="REMOVE"}(a||(a={}));var u=".email-chip__address",d=".email-chip__remove-button",c=function(){function i(t,e,i){void 0===i&&(i=n()),this.emailAddress=t,this.isValid=e,this.eventTarget=i,this.removeEvent=new l(a.REMOVE),this.createElement()}return Object.defineProperty(i.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"removeButton",{get:function(){return this._removeButton},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styleClasses",{get:function(){var t=["email-chip"];return this.isValid?t:t.concat("email-chip--invalid")},enumerable:!0,configurable:!0}),i.prototype.addListeners=function(){var t=this;this._removeButtonListener=function(){t.removeButton.removeEventListener("click",t._removeButtonListener),t.element.parentNode.removeChild(t.element),t._element=null,t.eventTarget.dispatchEvent(t.removeEvent)},this.removeButton.addEventListener("click",this._removeButtonListener)},i.prototype.createElement=function(){this._element=t("div",'  <span class="email-chip__address"></span>\n  <button type="button" aria-label="Remove e-mail" class="email-chip__remove-button" title="Remove e-mail"></button>\n\n',this.styleClasses),this._removeButton=e(this._element,d),e(this._element,u).innerHTML=this.emailAddress,this.addListeners()},i.prototype.addEventListener=function(t,e){this.eventTarget.addEventListener(t,e)},i.prototype.destroy=function(){this.removeButton.dispatchEvent(new Event("click"))},i}();
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}var p=function(t){return t.trim().toLowerCase()},f=function(){function i(t,e){void 0===e&&(e=n()),this.container=t,this.eventTarget=e,this.addKeys=[14,13,188],this.render()}return Object.defineProperty(i.prototype,"nativeElement",{get:function(){return this._nativeElement},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isValueNotEmpty",{get:function(){return Boolean(p(this.nativeElement.value.replace(/,/g,"")))},enumerable:!0,configurable:!0}),i.prototype.emit=function(t){this.eventTarget.dispatchEvent(new l(a.ADD,t))},i.prototype.emitAdd=function(t){var e=this;t?t.forEach((function(t){e.emit({email:t,isValid:o(t)})})):this.emit({email:p(this.nativeElement.value),isValid:this.isValid}),this.nativeElement.value=""},i.prototype.addListeners=function(){var t=this;this.nativeElement.addEventListener("keydown",(function(e){return t.onInput(e)})),this.nativeElement.addEventListener("blur",(function(){return t.onBlur()})),this.nativeElement.addEventListener("paste",(function(e){return t.onPaste(e)}))},i.prototype.render=function(){var n=t("div",'<input type="email" class="input-email" autocomplete="email" placeholder="add more people..." required>\n',["input-email-container"]);this._nativeElement=e(n,"input"),this.addListeners(),this.container.appendChild(n)},i.prototype.onInput=function(t){this.isValid=o(this.nativeElement.value),-1!==this.addKeys.indexOf(t.keyCode)&&this.isValueNotEmpty&&this.emitAdd()},i.prototype.onBlur=function(){this.isValid=o(this.nativeElement.value),this.isValueNotEmpty&&this.emitAdd()},i.prototype.onPaste=function(t){t.preventDefault();var e=t.clipboardData.getData("text").split(",").map(p).filter(Boolean);this.emitAdd(e)},i.prototype.addEventListener=function(t,e){this.eventTarget.addEventListener(t,e)},i}(),v=function(){function e(t){this.container=t,this.emailMap=new Map,this.render()}return e.prototype.renderInput=function(){var t=this;this.input=new f(this.element),this.input.addEventListener(a.ADD,(function(e){var n=e.email,i=e.isValid;t.addEmail(n,i)})),this.element.addEventListener("click",(function(e){e.target===t.element&&t.input.nativeElement.focus()}))},e.prototype.render=function(){this.element=t("div",["emails-input"]),this.renderInput(),this.container.appendChild(this.element)},e.prototype.createEmaillement=function(t,e){var n=this;void 0===e&&(e=!0);var i=new c(t,e);return i.addEventListener(a.REMOVE,(function(){n.emailMap.delete(t),n.input.nativeElement.focus()})),i},e.prototype.addEmail=function(t,e){if(void 0===e&&(e=!0),!this.emailMap.has(t)){var n=this.createEmaillement(t,e);this.emailMap.set(t,n),this.element.insertBefore(n.element,this.element.lastChild),this.element.scrollTop=this.element.scrollHeight}},e.prototype.getAllEmails=function(){return h(this.emailMap.keys())},e.prototype.getValidCount=function(){var t=0;return this.emailMap.forEach((function(e){e.isValid&&t++})),t},e.prototype.replaceAllEmails=function(t){var e=this;this.emailMap.forEach((function(t){return t.destroy()})),this.emailMap.clear(),t.forEach((function(t){return e.addEmail(t,o(t))}))},e}(),E=function(t,e){return t+e.getValidCount()},y=function(){function n(t,e){void 0===e&&(e=1),this.container=t,this.inputs=e,this.render()}return Object.defineProperty(n.prototype,"totalValidEmails",{get:function(){return this.emailsInputs.reduce(E,0)},enumerable:!0,configurable:!0}),n.prototype.getEmailsInputs=function(t){void 0===t&&(t=this.inputs);for(var e=[],n=0;n++<t;)e.push(new v(this.body));return e},n.prototype.addEventListeners=function(){var t=this;e(this.element,".email-form__add-button").addEventListener("click",(function(){t.emailsInputs.forEach((function(t){return t.addEmail(r())}))})),e(this.element,".email-form__get-count-button").addEventListener("click",(function(){window.alert("Total valid e-mails: "+t.totalValidEmails)}))},n.prototype.defineGlobalMethods=function(){window.addEmailsInput=this.addInput.bind(this),window.replaceEmails=this.replaceEmails.bind(this)},n.prototype.render=function(){this.element=t("forn",'<div class="email-form__header">\n  <h2 class="email-form-header__title">Share <strong>Board name</strong> with others</h2>\n  <div class="email-form-header__body"></div>\n</div>\n<div class="email-form__footer">\n  <button type="button" class="email-form__add-button">Add e-mail</button>\n  <button type="button" class="email-form__get-count-button">Get emails count</button>\n</div>\n',["email-form"]),this.body=e(this.element,".email-form-header__body"),this.emailsInputs=this.getEmailsInputs(),this.addEventListeners(),this.container.insertBefore(this.element,this.container.lastChild),this.defineGlobalMethods()},n.prototype.addInput=function(t){var e;void 0===t&&(t=1),(e=this.emailsInputs).push.apply(e,h(this.getEmailsInputs(t)))},n.prototype.replaceEmails=function(t,e){var n;void 0===e&&(e=0),null===(n=this.emailsInputs[e])||void 0===n||n.replaceAllEmails(t)},n}();document.addEventListener("DOMContentLoaded",(function(){return new y(document.body)}))}();
//# sourceMappingURL=bundle.js.map
